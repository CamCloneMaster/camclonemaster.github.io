<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>CamCloneMaster</title>
  <link href="./CamCloneMaster/style.css" rel="stylesheet">
  <!-- ...其他 head 内容... -->
  <script>
    MathJax = {
        tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']], tags: 'ams', macros: {} },
        svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    .title-icon {
      width: 53px; height: auto; vertical-align: middle; margin-right: 2px; position: relative; top: -6px;
    }

    /* General styles for all carousels */
    .video-carousel-container {
      margin-top: 20px;
      margin-bottom: 20px;
      outline: none;
    }

    .video-wrapper {
      position: relative;
      width: 80%; /* Default width for ALL video blocks */
      margin: 0 auto;
    }

    .carousel-video-player {
      display: block;
      width: 100%;
      background-color: #000;
      z-index: 1;
    }

    .side-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.4);
      color: white;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      font-size: 22px;
      line-height: 44px;
      text-align: center;
      cursor: pointer;
      z-index: 10;
      opacity: 0.6;
      transition: opacity 0.3s ease, background-color 0.3s ease;
    }

    .side-btn:hover {
      opacity: 1;
      background-color: rgba(0, 0, 0, 0.7);
    }

    .side-btn.prev-video-btn {
      left: 15px;
    }

    .side-btn.next-video-btn {
      right: 15px;
    }

    .side-btn:disabled {
      cursor: not-allowed;
      opacity: 0.2;
      background-color: rgba(0, 0, 0, 0.2);
    }

    .video-carousel-controls-bar {
      text-align: center;
      margin-top: 12px;
    }

    .video-counter {
      font-size: 16px;
      display: inline-block;
      margin-right: 15px;
      vertical-align: middle;
    }

    .carousel-indicators {
      display: inline-block;
      vertical-align: middle;
    }
    .indicator-dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      background-color: #ccc;
      border: 1px solid #bbb;
      border-radius: 50%;
      margin: 0 5px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .indicator-dot:hover {
      background-color: #bbb;
      transform: scale(1.1);
    }
    .indicator-dot.active {
      background-color: #555;
      border-color: #444;
      transform: scale(1.4);
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>
      <img src="./CamCloneMaster/camera.png" alt="Icon" class="title-icon">
      <strong>CamCloneMaster: Enabling Reference-based Camera Control for Video Generation</strong>
    </h1>
    <p id="authors"><span style="font-size: 24px">Anonymous Authors</span></p>
    <h3><em>TL;DR</em> <span style="font-weight: normal;">: we propose CamCloneMaster, a framework that enables users to replicate camera movements from reference videos without requiring camera parameters or test-time fine-tuning. CamCloneMaster seamlessly supports reference-based camera control for both I2V and V2V tasks within a unified framework.</span></h3>
    <!-- MODIFIED: Removed 'autoplay' and 'loop' attributes. Only 'controls' and 'muted' remain. -->
    <video width="100%" controls> 
      <source src="./CamCloneMaster/CamCloneMaster_Demo_Final.mp4" type="video/mp4">
    </video><br>
  </div>
  <div class="content">
    <h1 style="text-align:center;"><strong>Demos</strong></h1>
    <h2 style="text-align:center;">Camera Controlled Image-to-Video Generation</h2>

    <!-- CAROUSEL INSTANCE 1 - Demos (NOW Autoplay ENABLED) -->
    <div id="videoCarouselDemos1" class="video-carousel-container" tabindex="0">
      <div class="video-wrapper">
        <button class="prev-video-btn side-btn" aria-label="上一个视频">❮</button>
        <video class="carousel-video-player" controls loop muted>
          <source src="" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <button class="next-video-btn side-btn" aria-label="下一个视频">❯</button>
      </div>
      <div class="video-carousel-controls-bar">
        <span class="video-counter"></span>
        <div class="carousel-indicators"></div>
      </div>
    </div>

    <h2 style="text-align:center;">Camera Controlled Video-to-Video Re-Generation</h2>
    <!-- CAROUSEL INSTANCE 2 - Demos (Autoplay ENABLED) -->
    <div id="videoCarouselDemos2" class="video-carousel-container" tabindex="0">
      <div class="video-wrapper">
        <button class="prev-video-btn side-btn" aria-label="上一个视频">❮</button>
        <video class="carousel-video-player" controls loop muted>
          <source src="" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <button class="next-video-btn side-btn" aria-label="下一个视频">❯</button>
      </div>
      <div class="video-carousel-controls-bar">
        <span class="video-counter"></span>
        <div class="carousel-indicators"></div>
      </div>
    </div>
  </div>

  <div class="content">
    <h1 style="text-align:center;"><strong>Comparison Results</strong></h1>

    <h2 style="text-align:center;">Camera Controlled Image-to-Video Generation</h2>
    <!-- CAROUSEL INSTANCE 3 - Comparison (Autoplay) -->
    <div id="videoCarouselComparison1" class="video-carousel-container" tabindex="0">
      <div class="video-wrapper">
        <button class="prev-video-btn side-btn" aria-label="上一个视频">❮</button>
        <video class="carousel-video-player" controls autoplay loop muted> <!-- autoplay can be here or handled by JS -->
          <source src="" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <button class="next-video-btn side-btn" aria-label="下一个视频">❯</button>
      </div>
      <div class="video-carousel-controls-bar">
        <span class="video-counter"></span>
        <div class="carousel-indicators"></div>
      </div>
    </div>

    <h2 style="text-align:center;">Camera Controlled Video-to-Video Re-Generation</h2>
    <!-- CAROUSEL INSTANCE 4 - Comparison (Autoplay) -->
    <div id="videoCarouselComparison2" class="video-carousel-container" tabindex="0">
      <div class="video-wrapper">
        <button class="prev-video-btn side-btn" aria-label="上一个视频">❮</button>
        <video class="carousel-video-player" controls autoplay loop muted> <!-- autoplay can be here or handled by JS -->
          <source src="" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <button class="next-video-btn side-btn" aria-label="下一个视频">❯</button>
      </div>
      <div class="video-carousel-controls-bar">
        <span class="video-counter"></span>
        <div class="carousel-indicators"></div>
      </div>
    </div>
  </div>

  <div class="content">
    <h2 style="text-align:center;">Abstract</h2>
    <p>Camera control is crucial for generating expressive and cinematic videos. Existing methods rely on explicit sequences of camera parameters as control conditions, which can be cumbersome for users to construct, particularly for intricate camera movements. To provide a more intuitive camera control method, we propose CamCloneMaster, a framework that enables users to replicate camera movements from reference videos without requiring camera parameters or test-time fine-tuning. CamCloneMaster seamlessly supports reference-based camera control for both Image-to-Video and Video-to-Video tasks within a unified framework. Furthermore, we present the Camera Clone Dataset, a large-scale synthetic dataset designed for camera clone learning, encompassing diverse scenes, subjects, and camera movements. Extensive experiments and user studies demonstrate that CamCloneMaster outperforms existing methods in terms of both camera controllability and visual quality.</p>
  </div>
  <div class="content">
    <h2>Method</h2>
    <p> Given a camera motion reference video and an optional content reference video as inputs, 3D VAE encoder is utilized to convert reference videos into conditional latents $z_\textrm{cam}$ and $z_\textrm{cont}$. We inject the conditional latents into the model by concatenating them with the noise latent along the frame dimension. And only 3D spatial-temporal attention layers in DiT Blocks are trainable modules in the training process.</p>
    <img class="summary-img" src="./CamCloneMaster/network_framework.png" style="width:100%;"> <br>
  </div>
  <div class="content">
    <h2>Camera Clone Dataset</h2>
    <p> Reference-based camera clone learning requires triple video sets: a camera motion reference video $V_\textrm{cam}$, a content reference video $V_{\textrm{cont}}$, and a target video $V$, which recaptures the scene in $V_{\textrm{cont}}$ with the same camera movement as $V_{\textrm{cam}}$. Building such a dataset in the real world is difficult and label-intensive. Therefore, we collect several 3D scenes as background, and put characters into scenes as foreground, each character is combined with a specific animation. Then, multiple paired camera trajectories are designed and shots are made by rendering in Unreal Engine 5.</p>
    <br>
    <!-- This video remains autoplay loop muted -->
    <video width="100%" controls autoplay loop muted>
    <source src="./CamCloneMaster/dataset.mp4" type="video/mp4">
    </video>
    <br>
  </div>
<script>
class VideoCarousel {
    constructor(containerId, videoPaths, enableAutoplay = true) {
        this.container = document.getElementById(containerId);
        if (!this.container) {
            console.error(`VideoCarousel: Container with ID "${containerId}" not found.`);
            return;
        }

        this.videoPaths = videoPaths || [];
        this.currentVideoIndex = 0;
        this.enableAutoplay = enableAutoplay;

        this.videoPlayer = this.container.querySelector('.carousel-video-player');
        this.videoSource = this.videoPlayer ? this.videoPlayer.querySelector('source') : null;
        this.prevButton = this.container.querySelector('.prev-video-btn');
        this.nextButton = this.container.querySelector('.next-video-btn');
        this.videoCounterDisplay = this.container.querySelector('.video-counter');
        this.indicatorsContainer = this.container.querySelector('.carousel-indicators');

        if (!this.videoPlayer || !this.videoSource || !this.prevButton || !this.nextButton || !this.videoCounterDisplay) {
            console.error(`VideoCarousel (${containerId}): One or more required child elements not found.`);
            return;
        }
        if (!this.indicatorsContainer) {
            console.warn(`VideoCarousel (${containerId}): Optional element .carousel-indicators not found. Indicator feature will be disabled.`);
        }

        this.init();
    }

    init() {
        this.prevButton.addEventListener('click', () => this.showPrevVideo());
        this.nextButton.addEventListener('click', () => this.showNextVideo());

        this.container.addEventListener('keydown', (event) => {
            const tagName = event.target.tagName.toLowerCase();
            if (tagName === 'input' || tagName === 'textarea' || tagName === 'select' || event.target.classList.contains('indicator-dot') || event.target.classList.contains('side-btn')) {
                return;
            }

            if (event.key === 'ArrowLeft') {
                event.preventDefault();
                this.showPrevVideo();
            } else if (event.key === 'ArrowRight') {
                event.preventDefault();
                this.showNextVideo();
            }
        });

        this.createIndicators();
        this.loadVideo(this.currentVideoIndex);
    }

    createIndicators() {
        if (!this.indicatorsContainer) return;
        this.indicatorsContainer.innerHTML = '';
        if (this.videoPaths.length <= 1) {
            this.indicatorsContainer.style.display = 'none';
            return;
        }
        this.indicatorsContainer.style.display = 'inline-block';

        this.videoPaths.forEach((_, index) => {
            const dot = document.createElement('span');
            dot.classList.add('indicator-dot');
            dot.dataset.index = index;
            dot.setAttribute('role', 'button');
            dot.setAttribute('aria-label', `Go to video ${index + 1}`);
            dot.tabIndex = 0;
            dot.addEventListener('click', () => this.loadVideo(index));
            dot.addEventListener('keydown', (event) => {
                if (event.key === 'Enter' || event.key === ' ') {
                    event.preventDefault();
                    this.loadVideo(index);
                }
            });
            this.indicatorsContainer.appendChild(dot);
        });
    }

    updateActiveIndicator() {
        if (!this.indicatorsContainer || this.videoPaths.length <= 1) return;
        const dots = this.indicatorsContainer.querySelectorAll('.indicator-dot');
        dots.forEach((dot, idx) => {
            if (idx === this.currentVideoIndex) {
                dot.classList.add('active');
                dot.setAttribute('aria-current', 'true');
            } else {
                dot.classList.remove('active');
                dot.removeAttribute('aria-current');
            }
        });
    }

    updateVideoCounter() {
        if (this.videoPaths.length > 0) {
            this.videoCounterDisplay.textContent = `${this.currentVideoIndex + 1} / ${this.videoPaths.length}`;
        } else {
            this.videoCounterDisplay.textContent = "0 / 0";
        }
    }

    loadVideo(index) {
        if (this.videoPaths.length === 0) {
            console.warn(`VideoCarousel (${this.container.id}): No videos provided.`);
            this.videoPlayer.style.display = 'none';
            this.prevButton.disabled = true;
            this.nextButton.disabled = true;
            if (this.indicatorsContainer) this.indicatorsContainer.style.display = 'none';
            this.updateVideoCounter();
            this.updateActiveIndicator();
            return;
        }

        if (index >= 0 && index < this.videoPaths.length) {
            this.currentVideoIndex = index;
            this.videoSource.setAttribute('src', this.videoPaths[this.currentVideoIndex]);
            this.videoPlayer.load();

            this.videoPlayer.loop = true; // All carousel videos loop
            this.videoPlayer.muted = true; // All carousel videos are muted
            this.videoPlayer.autoplay = this.enableAutoplay; // Controlled by instance setting

            if (this.enableAutoplay) {
                const playPromise = this.videoPlayer.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.warn(`VideoCarousel (${this.container.id}): Autoplay for video ${this.currentVideoIndex + 1} was prevented. Error: ${error.message}`);
                    });
                }
            } else {
                 this.videoPlayer.pause();
            }

            this.prevButton.disabled = (this.currentVideoIndex === 0);
            this.nextButton.disabled = (this.currentVideoIndex === this.videoPaths.length - 1);

            this.updateVideoCounter();
            this.updateActiveIndicator();

            this.videoPlayer.style.display = 'block';
            if (this.indicatorsContainer) {
                this.indicatorsContainer.style.display = (this.videoPaths.length > 1) ? 'inline-block' : 'none';
            }
        }
    }

    showPrevVideo() {
        if (this.currentVideoIndex > 0) {
            this.loadVideo(this.currentVideoIndex - 1);
        }
    }

    showNextVideo() {
        if (this.currentVideoIndex < this.videoPaths.length - 1) {
            this.loadVideo(this.currentVideoIndex + 1);
        }
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const carouselDemos1Videos = [
        "./CamCloneMaster/Demos/I2V/0001.mp4",
        "./CamCloneMaster/Demos/I2V/0002.mp4",
        "./CamCloneMaster/Demos/I2V/0003.mp4",
        "./CamCloneMaster/Demos/I2V/0004.mp4",
    ];
    // Demos1: NOW AUTOPLAY ENABLED
    new VideoCarousel('videoCarouselDemos1', carouselDemos1Videos, true); // MODIFIED

    const carouselDemos2Videos = [
        "./CamCloneMaster/Demos/V2V/0001.mp4",
        "./CamCloneMaster/Demos/V2V/0002.mp4",
        "./CamCloneMaster/Demos/V2V/0003.mp4",
        "./CamCloneMaster/Demos/V2V/0004.mp4",
        "./CamCloneMaster/Demos/V2V/0005.mp4",
        "./CamCloneMaster/Demos/V2V/0006.mp4",
        "./CamCloneMaster/Demos/V2V/0007.mp4",
        "./CamCloneMaster/Demos/V2V/0008.mp4",
        "./CamCloneMaster/Demos/V2V/0009.mp4",
        "./CamCloneMaster/Demos/V2V/0010.mp4",
    ];
    new VideoCarousel('videoCarouselDemos2', carouselDemos2Videos, true); // Demos2: Autoplay enabled

    const carouselComparison1Videos = [
        "./CamCloneMaster/Comparison/I2V/0001.mp4",
        "./CamCloneMaster/Comparison/I2V/0002.mp4",
        "./CamCloneMaster/Comparison/I2V/0003.mp4",
        "./CamCloneMaster/Comparison/I2V/0004.mp4",
    ];
    new VideoCarousel('videoCarouselComparison1', carouselComparison1Videos, true); // Comparison1: Autoplay enabled

    const carouselComparison2Videos = [
        "./CamCloneMaster/Comparison/V2V/0001.mp4",
        "./CamCloneMaster/Comparison/V2V/0002.mp4",
        "./CamCloneMaster/Comparison/V2V/0003.mp4",
    ];
    new VideoCarousel('videoCarouselComparison2', carouselComparison2Videos, true); // Comparison2: Autoplay enabled
});
</script>
</body>
</html>